apiVersion: v1
kind: Pod
metadata:
  name: transformer-keras-preprocess
  annotations:
    # Communication type: push, pull, hpush, hpull
    communication_type: "hpull"
    wait_timeout: "1m"
spec:
  containers:
    - name: server
      image: aistorage/transformer_keras_preprocess:latest
      imagePullPolicy: Always
      ports:
        - containerPort: 8000
      env:
        - name: TRANSFORM
          value: '{"rotation_range": 40, "width_shift_range": 0.2, "height_shift_range": 0.2, "shear_range": 0.2, "zoom_range": 0.2, "horizontal_flip": true, "fill_mode": "nearest"}'
        - name: FORMAT
          value: "JPEG"
      resources:
        requests:
          cpu: "1"
          memory: "1Gi"
        limits:
          cpu: "2"
          memory: "2Gi"
  restartPolicy: Never 